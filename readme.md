## 棋类对战平台

#### 相关链接

+ 一阶段演示视频：https://cloud.tsinghua.edu.cn/f/65dd6f93411a40f79a81/
+ 二阶段演示视频（只演示了增加的功能）：https://cloud.tsinghua.edu.cn/f/ef4217db369e4005a33c/
+ Git仓库：https://github.com/Suikasxt/board-game

#### 设计思路

+ 采用服务器端和客户端分离的设计，通过socket网络通信，可以运行于多机环境：
+ 服务器端：
  + 维护棋盘的状态和所有游戏规则，接受客户端反馈的用户操作，反馈新的棋盘状态
  + 主要分为server、rule、proxy、ai、user四大模块：
    + server：包含GameServer类，用于管理游戏对局流程
    + rule：包含抽象规则BaseRule及相应的五子棋规则GobangRule、围棋规则GoRule，使用工厂模式进行创建。同时包含备忘录模式的MementoBox类维护历史游戏状态实现悔棋。
    + proxy：代理模式，在ServerProxy中封装了一切跟客户端交互的通信接口。
    + ai：简单工厂，实现了随机AI、规则AI和蒙特卡洛搜索AI，接入方式为客户端不直接发送操作指令，而是发送一个AI托管该步指令，由服务器端ai计算后直接代为操作。
    + user：单例模式，实现了一个管理用户信息的模块，负责存储和读取数据，并为主模块提供用户信息。
+ 客户端：
  + 提供GUI界面（pyqt5），上报用户操作到服务器端，并展示当前棋盘状态
  + 与server类似，主要分为client、gui、proxy三大模块：
    + client：包含GameClient类，用于管理游戏对局流程。而由于客户端流程其实很简单，发送开始信号后不断展示服务器端发来的信号即可，因此实际上只充当了proxy和gui直接对接的接口层。
    + gui：使用pyqt实现了所有图形界面，主要包含侧边菜单栏和棋盘两大模块。
    + proxy：代理模式，在ClientProxy中封装了一切跟服务端交互的通信接口。

#### 类图

![](类图.png)

#### 功能完成情况

+ 完成五子棋、围棋、黑白棋，包括对局（落子、跳过、悔棋、认输）和胜负判定
+ GUI图形界面：完成
+ 录像与回放：未完成
+ AI功能：完成，针对黑白棋实现了随机AI、规则AI和蒙特卡洛搜索AI
+ 用户账户管理：完成，服务器端存储用户信息到文件中，目前只存了获胜场次。
+ 网络对战：完成，客户端与服务器端数据交互基于socket，在本地启动一个服务器进程和两个客户端进程进行网络对战。

